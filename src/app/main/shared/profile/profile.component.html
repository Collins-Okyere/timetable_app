<div class="my-12 p-4 lg:p-8 bg-gray-50 min-h-screen">
    
    <h1 class="text-2xl font-bold mb-6">Profile</h1>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

        <!-- Left Card -->
         <div class="bg-white rounded-xl shadow p-6 lg:h-[350px] {{isEditing ? 'hidden lg:flex lg:flex-col lg:items-center' : 'flex flex-col items-center'}}">
            
            <div class="relative">
                <img [src]="user?.photo" alt="User Avatar" class="w-auto h-40 rounded-lg object-cover">

                <button class="absolute bottom-1 right-1 bg-gray-200 m-2 p-1 px-2 rounded-full shadow">
                    ✏️
                </button>
            </div>

            <h2 class="mt-4 text-xl font-semibold">{{user?.firstName ?? ''}} {{ user?.firstName ?? '' }} {{ user?.lastName ?? '' }} {{user?.otherNames ?? ''}}</h2>

            <p class="text-gray-500 text-sm mt-1">{{ user?.country?.name }}</p>

            <div class="mt-2 flex justify-center items-center space-x-1">
                <span class="text-yellow-500 text-lg">⭐</span>
                <span class="font-medium">{{ user?.rating }}</span>
                <span class="ml-2 text-xs bg-gray-100 px-2 py-0.5 rounded-full">{{user?.userRole | capitalizeWords}}</span>
            </div>

        </div>

        <!-- Right Card -->
        <div class="bg-white rounded-xl shadow-md p-6 lg:col-span-2">
            
            <div class="flex justify-between items-center mb-4 lg:px-6">
                <h3 class="text-lg font-semibold text-gray-700">User Information</h3>
                <button *ngIf="!isEditing" (click)="isEditing = !isEditing" class="mt-6 bg-yellow-500 text-white px-6 py-2 rounded flex justify-end hover:bg-yellow-600">
                    {{ isEditing ? 'Cancel' : 'Edit' }}
                </button>
            </div>

            <!-- Form -->
            <div  class="space-y-4 py-6 px-2 lg:p-6">
                 
                <label class="block text-sm font-medium">First Name</label>
                <input [(ngModel)]="newUser.firstName" [placeholder]="!isEditing ? '(Empty)' : 'Enter First Name'" type="text" [disabled]="!isEditing" class="w-full {{isEditing ? 'border rounded mt-1' : '' }} p-2 px-3" name="firstName" />
                 
                <label class="block text-sm font-medium">Last Name</label>
                <input [(ngModel)]="newUser.lastName" [placeholder]="!isEditing ? '(Empty)' : 'Enter Last Name'" type="text" [disabled]="!isEditing" class="w-full {{isEditing ? 'border rounded mt-1' : '' }} p-2 px-3" name="lastName" />
                 
                <label class="block text-sm font-medium">Other Name(s)</label>
                <input [(ngModel)]="newUser.otherNames" [placeholder]="!isEditing ? '(Empty)' : 'Enter Other Name'" type="text" [disabled]="!isEditing" class="w-full {{isEditing ? 'border rounded mt-1' : '' }} p-2 px-3" name="otherNames" />

                <label class="block text-sm font-medium mt-4">Phone</label>
                <input [(ngModel)]="newUser.phone" [placeholder]="!isEditing ? '(Empty)' : 'Enter Phone Number'" type="text" [disabled]="!isEditing" class="w-full {{isEditing ? 'border rounded mt-1' : '' }} p-2 px-3" name="phone" />

                <label class="block text-sm font-medium mt-4">Email</label>
                <input [(ngModel)]="newUser.email" [placeholder]="!isEditing ? '(Empty)' : 'Enter Email'" type="email" [disabled]="!isEditing" class="w-full {{isEditing ? 'border rounded mt-1' : '' }} p-2 px-3" name="email" />

                <label class="block text-sm font-medium mt-4 pb-3 ">Country</label>
                <app-select-input *ngIf="refreshSelect" id="country" [selectInputData]="{ items: fetchedData?.countries, placeholder:'Select Country', displayProperty: 'name', searchProperty: 'name', noOutline: true, autoClose: true, searchable: true, disabled: !isEditing, defaultValue: newUser.country }" (selectionChanged)="onSelectionChanged('country', $event)"></app-select-input>
                
                <div class="py-6"> <hr></div>

                <h3 class="text-lg font-semibold mb-2">Preferences:</h3>

                <label class="block text-sm font-medium mt-4 pb-3">Preferyellow Language</label>
                <app-select-input *ngIf="refreshSelect" id="language" [selectInputData]="{ items: fetchedData?.languages, placeholder:'Select Language', disabled: !isEditing, displayProperty: 'name', searchProperty: 'name', noOutline: true, autoClose: true, defaultValue: newUser.language }" (selectionChanged)="onSelectionChanged('language', $event)"></app-select-input>

                <div class="py-6"> <hr></div>

                <h3 class="text-lg font-semibold mb-2">Password:</h3>

                <label class="flex text-sm font-medium mt-4 justify-between items-center">
                    <label>Current Password</label> 
                    <label  *ngIf="isEditing" class="ml-2 cursor-pointer px-3 py-1 bg-gray-50 hover:bg-gray-100" (click)="changePass()">{{changePassword ? 'Cancel' : 'Change'}}</label>
                </label>
                <div class="relative">
                    <input [type]="showPassword.old ? 'text' : 'password'" id="password" name="password" [(ngModel)]="newUser.password" [disabled]="!isEditing" requiyellow class="w-full {{isEditing ? 'border rounded mt-1' : '' }} p-2 px-3" placeholder="••••••••"/>
                    <button *ngIf="isEditing" type="button" (click)="showPassword.old = !showPassword.old" class="absolute inset-y-0 right-0 px-3 flex items-center text-sm text-gray-500">
                        {{ showPassword.old ? 'Hide' : 'Show' }}
                    </button>
                </div>
                <label *ngIf="changePassword && isEditing" class="block text-sm font-medium mt-4">New Password</label>
                <div *ngIf="changePassword && isEditing" class="relative">
                    <input [type]="showPassword.new ? 'text' : 'password'" id="newPassword" name="newPassword" [(ngModel)]="password.new" requiyellow [disabled]="!isEditing" class="w-full {{isEditing ? 'border rounded mt-1' : '' }} p-2 px-3" placeholder="••••••••"/>
                    <button *ngIf="isEditing" type="button" (click)="showPassword.new = !showPassword.new" class="absolute inset-y-0 right-0 px-3 flex items-center text-sm text-gray-500">
                        {{ showPassword.new ? 'Hide' : 'Show' }}
                    </button>
                </div>

                <label *ngIf="changePassword && isEditing" class="block text-sm font-medium mt-4">Confirm New Password</label>
                <div *ngIf="changePassword && isEditing" class="relative">
                    <input [type]="showPassword.confirm ? 'text' : 'password'" id="confirmPassword" name="confirmPassword" [(ngModel)]="password.confirm" requiyellow [disabled]="!isEditing" class="w-full {{isEditing ? 'border rounded mt-1' : '' }} p-2 px-3" placeholder="••••••••"/>
                    <button *ngIf="isEditing" type="button" (click)="showPassword.confirm = !showPassword.confirm" class="absolute inset-y-0 right-0 px-3 flex items-center text-sm text-gray-500">
                        {{ showPassword.confirm ? 'Hide' : 'Show' }}
                    </button>
                </div>

                <div class="flex justify-end items-center pt-8 space-x-3">
                    <button *ngIf="isEditing" (click)="cancel()" class="bg-yellow-50 text-yellow-500 px-4 py-2 rounded hover:bg-yellow-100 hover:text-yellow-600">
                        Cancel
                    </button>
                    <button *ngIf="isEditing" (click)="saveChanges()" class="bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700">
                        Update
                    </button>
                </div>

            </div>

        </div>

    </div>
</div>