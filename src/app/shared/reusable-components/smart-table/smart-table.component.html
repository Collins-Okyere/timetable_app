<div class="p-4 lg:p-16 py-16 my-8 min-h-screen" *ngIf="tableData?.dataSet">
    
    <div class="w-full">

        <div class="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mx-3 lg:mx-0 mb-3">
            <div>
                <h1 class="text-2xl lg:text-3xl font-bold text-gray-800">{{user?.user_role === 'lecturer' ? 'My' : ''}} {{tableData?.title ?? tableData?.subTitle ?? tableData?.tag ??  'Table'}} {{tableData?.subTitle ? ' — '+tableData?.subTitle : ''}}</h1>
                <p *ngIf="tableData?.description" class="text-sm text-gray-700 mt-1">{{tableData?.description}}</p>
            </div>
            <button *ngIf="tableData?.allowAdd" (click)="openAddModal()" class="px-2 py-2 lg:px-4 lg:py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 text-sm lg:text-normal"> + Add {{tableData?.tag ?? 'Item'}} </button>
        </div>

        <div class="bg-white rounded-xl lg:p-4 lg:shadow">
                    
            <!-- Filters -->
            <div *ngIf="tableData?.allowFilters" class="hidden lg:grid grid-cols-1 md:grid-cols-4 gap-3 my-6 mx-3 items-center">

                <div *ngIf="tableData?.filters?.filterBy?.length !== 0 && tableData?.filters?.filterBy?.includes('date')">
                    <label class="block text-xs text-gray-600 mb-1">From</label>
                    <input type="date" [(ngModel)]="filter.start_date" (ngModelChange)="onStartDateChange($event)" class="w-full p-2 border rounded-md" />
                </div>

                <div *ngIf="tableData?.filters?.filterBy?.length !== 0 && tableData?.filters?.filterBy?.includes('date')">
                    <label class="block text-xs text-gray-600 mb-1">To</label>
                    <input type="date" [(ngModel)]="filter.end_date" (ngModelChange)="onEndDateChange($event)" class="w-full p-2 border rounded-md" />
                </div>

                <div *ngIf="tableData?.filters?.dataSets > 0">
                    <label class="block text-xs text-gray-600 mb-1">Report On</label>
                    <app-select-input class="w-full" *ngIf="refreshSelect" id="tableData" [selectInputData]="{ items: ['All Donations','Beneficiaries', 'Organisations', 'Projects'], defaultValue: filter.tableData, placeholder: 'Filter By Organisation', autoClose: true }" (selectionChanged)="onFilter('tableData', $event)"></app-select-input>
                </div>

                <div *ngIf="tableData?.filters?.filterBy?.length !== 0 && tableData?.filters?.filterBy?.includes('organisation')">
                    <label class="block text-xs text-gray-600 mb-1">Filter By Organisation</label>
                    <app-select-input class="w-full" *ngIf="refreshSelect" id="organisation" [selectInputData]="{ items: fetchedData?.organisations, defaultValue: filter.organisation, placeholder: 'Filter By Organisation', autoClose: true }" (selectionChanged)="onFilter('organisation', $event)"></app-select-input>
                </div>

                <div *ngIf="tableData?.filters?.filterBy?.length !== 0 && tableData?.filters?.filterBy?.includes('beneficiary')">
                    <label class="block text-xs text-gray-600 mb-1">Filter By Beneficiary</label>
                    <app-select-input class="w-full" *ngIf="refreshSelect" id="beneficiary" [selectInputData]="{ items: fetchedData?.beneficiaries, defaultValue: filter.beneficiary, placeholder: 'Filter By Beneficiary', autoClose: true }" (selectionChanged)="onFilter('beneficiary', $event)"></app-select-input>
                </div>

                <div *ngIf="tableData?.filters?.filterBy?.length !== 0 && tableData?.filters?.filterBy?.includes('donor')">
                    <label class="block text-xs text-gray-600 mb-1">Filter By Donor</label>
                    <app-select-input class="w-full" *ngIf="refreshSelect" id="donor" [selectInputData]="{ items: fetchedData?.donors, defaultValue: filter.donor, placeholder: 'Filter By Donor', autoClose: true }" (selectionChanged)="onFilter('donor', $event)"></app-select-input>
                </div>

                <div *ngIf="tableData?.filters?.filterBy?.length !== 0 && tableData?.filters?.filterBy?.includes('project')">
                    <label class="block text-xs text-gray-600 mb-1">Filter By Project</label>
                    <app-select-input class="w-full" *ngIf="refreshSelect" id="projects" [selectInputData]="{ items: fetchedData?.projects, defaultValue: filter.project, placeholder: 'Filter By Projects', autoClose: true }" (selectionChanged)="onFilter('project', $event)"></app-select-input>
                </div>

            </div>

            <!-- Summary cards -->
            <div *ngIf="tableData?.allowStatCards && showStats" class="mx-3 grid grid-cols-1 sm:grid-cols-3 lg:gap-4 gap-y-2 {{tableData?.allowFilters ? 'border-b lg:border-y border-gray-200 py-4 lg:py-8' : ''}}">
            
                <div *ngIf="tableData?.stats?.defaults?.length !== 0 && tableData?.stats?.defaults?.includes('count')" class="bg-white p-4 rounded-xl shadow flex flex-row justify-between items-center lg:block">
                    <div class="text-sm text-gray-700">Total {{tableData?.tag ?? tableData?.title ?? tableData?.subTitle}}</div>
                    <div class="mt-2 font-semibold text-lg lg:text-2xl text-gray-800">{{ getStats.totalCount }}</div>
                </div>
            
                <div *ngIf="tableData?.stats?.defaults?.length !== 0 && tableData?.stats?.defaults?.includes('gender')"  class="bg-white p-4 rounded-xl shadow flex flex-row justify-between items-center lg:block">
                    <div class="text-sm text-gray-700">Total Male</div>
                    <div class="mt-2 font-semibold text-lg lg:text-2xl text-gray-800">{{ getStats.maleCount }}</div>
                </div>
            
                <div *ngIf="tableData?.stats?.defaults?.length !== 0 && tableData?.stats?.defaults?.includes('gender')"  class="bg-white p-4 rounded-xl shadow flex flex-row justify-between items-center lg:block">
                    <div class="text-sm text-gray-700">Total Female</div>
                    <div class="mt-2 font-semibold text-lg lg:text-2xl text-gray-800">{{ getStats.femaleCount }}</div>
                </div>
            
                <div *ngIf="tableData?.stats?.defaults?.length !== 0 && tableData?.stats?.defaults?.includes('active')"  class="bg-white p-4 rounded-xl shadow flex flex-row justify-between items-center lg:block">
                    <div class="text-sm text-gray-700">Active {{tableData?.tag ?? tableData?.title ?? tableData?.subTitle}}</div>
                    <div class="mt-2 font-semibold text-lg lg:text-2xl text-gray-800">{{ getStats.activeCount }}</div>
                </div>
            
                <div *ngIf="tableData?.stats?.defaults?.length !== 0 && tableData?.stats?.defaults?.includes('completed')"  class="bg-white p-4 rounded-xl shadow flex flex-row justify-between items-center lg:block">
                    <div class="text-sm text-gray-700">Completed {{tableData?.tag ?? tableData?.title ?? tableData?.subTitle}}</div>
                    <div class="mt-2 font-semibold text-lg lg:text-2xl text-gray-800">{{ getStats.totalCompletedCount }}</div>
                </div>
            
                <div *ngIf="tableData?.stats?.defaults?.length !== 0 && tableData?.stats?.defaults?.includes('missed')"  class="bg-white p-4 rounded-xl shadow flex flex-row justify-between items-center lg:block">
                    <div class="text-sm text-gray-700">Missed {{tableData?.tag ?? tableData?.title ?? tableData?.subTitle}}</div>
                    <div class="mt-2 font-semibold text-lg lg:text-2xl text-gray-800">{{ getStats.totalMissedCount }}</div>
                </div>
            
                <div *ngIf="tableData?.stats?.defaults?.length !== 0 && tableData?.stats?.defaults?.includes('swapped')"  class="bg-white p-4 rounded-xl shadow flex flex-row justify-between items-center lg:block">
                    <div class="text-sm text-gray-700">Swapped {{tableData?.tag ?? tableData?.title ?? tableData?.subTitle}}</div>
                    <div class="mt-2 font-semibold text-lg lg:text-2xl text-gray-800">{{ getStats.totalSwappedCount }}</div>
                </div>
            
                <div *ngIf="tableData?.stats?.defaults?.length !== 0 && tableData?.stats?.defaults?.includes('pending')"  class="bg-white p-4 rounded-xl shadow flex flex-row justify-between items-center lg:block">
                    <div class="text-sm text-gray-700">Pending {{tableData?.tag ?? tableData?.title ?? tableData?.subTitle}}</div>
                    <div class="mt-2 font-semibold text-lg lg:text-2xl text-gray-800">{{ getStats.totalPendingCount }}</div>
                </div>
            
                <div *ngIf="tableData?.stats?.defaults?.length !== 0 && tableData?.stats?.defaults?.includes('new')"  class="bg-white p-4 rounded-xl shadow flex flex-row justify-between items-center lg:block">
                    <div class="text-sm text-gray-700">New {{tableData?.tag ?? tableData?.title ?? tableData?.subTitle}}</div>
                    <div class="mt-2 font-semibold text-lg lg:text-2xl text-gray-800">{{ getStats.newCount }}</div>
                </div>
            
                <div *ngIf="tableData?.stats?.defaults?.length !== 0 && tableData?.stats?.defaults?.includes('paid')"  class="bg-white p-4 rounded-xl shadow flex flex-row justify-between items-center lg:block">
                    <div class="text-sm text-gray-700">Paid {{tableData?.tag ?? tableData?.title ?? tableData?.subTitle}}</div>
                    <div class="mt-2 font-semibold text-lg lg:text-2xl text-gray-800">{{ getStats.totalPaidCount }}</div>
                </div>

                <div *ngIf="tableData?.stats?.defaults?.length !== 0 && tableData?.stats?.defaults?.includes('totalCash')"  class="bg-white p-4 rounded-xl shadow flex flex-row justify-between items-center lg:block">
                    <div class="text-sm text-gray-700 whitespace-nowrap inline-flex">Total Cash <span class="lg:ml-1 hidden lg:block">Value</span></div>
                    <div class="mt-2 font-semibold text-lg lg:text-2xl text-gray-800">{{ formatCurrency(getStats.totalCash) }}</div>
                </div>

                <div *ngIf="tableData?.stats?.defaults?.length !== 0 && tableData?.stats?.defaults?.includes('totalInKind')"  class="bg-white p-4 rounded-xl shadow flex flex-row justify-between items-center lg:block">
                    <div class="text-sm text-gray-700">In-Kind Donations</div>
                    <div class="mt-2 font-semibold text-lg lg:text-2xl text-gray-800">{{ getStats.totalInKindCount }}</div>
                </div>
                
                <!-- <div *ngFor="let card of tableData?.statCards" class="bg-white p-4 rounded-xl shadow flex flex-row justify-between items-center lg:block">
                    <div class="text-sm text-gray-700">{{card?.title}}</div>
                    <div class="mt-2 font-semibold text-lg lg:text-2xl text-gray-800">{{ caritem.val }}</div>
                </div>  -->


            </div>

            <div *ngIf="tableData?.allowStatCards" class="flex justify-end items-center mr-3 my-1">
                <label (click)="showStats = !showStats" class="text-sm text-gray-900 bg-emerald-50 p-2 hover:text-emerald-700 rounded-lg px-3">{{!showStats ? 'View Stats ▼' : 'Hide Stats ▲'}}</label>
            </div>

            <!-- Table / list -->
            <div class="{{tableData?.allowStatCards ? 'pt-2 lg:pt-6' : ''}} ">
                
                <!-- Table Controls -->
                <div class="flex flex-col lg:flex-row justify-between items-center p-4 space-y-3 lg:space-y-0 lg:space-x-4">

                    <!-- Search -->
                    <div *ngIf="tableData?.allowGlobalSearch" class="w-full lg:w-1/3">
                        <input type="text" placeholder="Search records..." [(ngModel)]="filter.search" (input)="resetPage()" class="w-full border rounded-lg px-4 py-2 text-gray-700 focus:ring-2 focus:ring-emerald-500 outline-none" />
                    </div>

                    <div class="w-full flex items-center justify-between space-x-4">


                        <div *ngIf="tableData?.allowFilters && tableData?.filters?.filterBy?.length !== 0 && tableData?.filters?.filterBy?.includes('donationType')"class="w-44">
                            <app-select-input class="w-full" *ngIf="refreshSelect" id="organisation" [selectInputData]="{ items: ['All Types', 'Cash', 'In-Kind'], defaultValue: filter.type, placeholder: 'Donation Type', autoClose: true }" (selectionChanged)="onFilter('type', $event)"></app-select-input>
                        </div>

                        <!-- Actions Menu -->
                        <div class="relative" *ngIf="tableData?.allowDownload">
                            
                            <button (focus)="toggleMenu()" (blur)="toggleMenu()" class="flex items-center bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg text-gray-700">
                                <span class="mr-2">Actions</span>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" ill="currentColor">
                                    <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.584l3.71-4.354a.75.75 0 111.14.976l-4.25 5a.75.75 0 01-1.14 0l-4.25-5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
                                </svg>
                            </button>

                            <!-- Dropdown -->
                            <div *ngIf="menuOpen" class="absolute right-0 mt-2 w-44 bg-white border rounded-lg shadow-lg z-20">
                                <ul class="py-2 text-sm text-gray-700">
                                    
                                    <li>
                                        <button (click)="exportPDF()" class="block w-full text-center px-4 py-2 hover:bg-gray-100">Print
                                            PDF</button>
                                    </li>

                                    <li>
                                        <button (click)="exportCSV()" class="block w-full text-center px-4 py-2 hover:bg-gray-100">Export as
                                            CSV</button>
                                    </li>

                                </ul>
                            </div>

                        </div>

                    </div>

                </div>

                <div class="p-2 italic text-sm text-gray-500">Click column heading to sort by column</div>

                <div class="overflow-x-auto bg-white rounded-xl shadow px-2 py-4 lg:p-4">

                    <h3 class="font-semibold text-lg pb-3">{{tableData?.title}} list
                        <span class="ml-1 text-gray-500 text-sm">{{ getStats.totalCount}} {{tableData?.title}}</span>
                    </h3>

                    <table class="min-w-full divide-y divide-gray-100">
                        
                        <thead class="bg-gray-100">
                            <tr>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-900">Sn.</th>
                                <th scope="col" *ngFor="let col of tableHeaders; let i = index; let isLast = last" class="cursor-pointer px-4 py-2 {{tableData?.allowColumnSearch ? 'text-center' : 'text-left' }} text-xs font-medium text-gray-900 space-y-1">
                                    <div (click)="setSort( tableData?.allowSorting ? col : null)" [ngClass]="{'flex justify-center' : tableData?.allowColumnSearch, 'text-left': !tableData?.allowColumnSearch }" class="items-center">
                                        {{col | capitalizeWords}} <span *ngIf="tableData?.allowSorting && sortField === col" class="ml-2"> {{ sortDirection === 'asc' ? '▲' : '▼' }} </span>
                                    </div>
                                    <input *ngIf="tableData?.allowColumnSearch" [(ngModel)]="columnFilters[col]" [placeholder]="'Search ' + (col | capitalizeWords)" class="px-3 py-1 flex rounded focus:outline focus:outline-emerald-600 w-full" />
                                </th>            
                                <th scope="col" *ngIf="tableData?.title !== 'Reports'" class="px-4 py-3 text-right text-xs font-medium text-gray-900">Actions</th>
                            </tr>
                        </thead>

                        <tbody *ngIf="tableData?.dataSet?.length > 0" class="divide-y divide-gray-100">
                            
                            <tr *ngFor="let item of pageItems; let i = index">
                            
                                <td class="whitespace-nowrap p-3 font-bold text-sm text-gray-900">
                                    {{ (page - 1) * tableData?.pageSize + i + 1 }}.
                                </td>

                                <td *ngFor="let key of keys" class="whitespace-nowrap p-3 text-gray-900">

                                    <div *ngIf="!Array.isArray(item[key])" class="whitespace-nowrap text-sm space-x-2 flex items-center">

                                        <div *ngIf="item[key]?.photo || item[key]?.image || item[key]?.logo || item[key]?.flag || isImageUrl(item[key])" class="avatar">
                                            <div class="mask mask-squircle h-8 w-8">
                                                <img [src]="item[key]?.photo ?? item[key]?.image ?? item[key]?.logo ?? item[key]?.flag ?? item[key]">
                                            </div>
                                        </div>
            
                                        <div class="space-y-1" [ngClass]="{'text-gray-400': !item[key]?.name || !item[key], 'text-gray-900': item[key]?.name || item[key], 'hidden': isImageUrl(item[key]), 'bg-green-100 text-green-800 px-2 py-1 rounded-2xl': typeof item[key] === 'boolean' && item[key] === true, 'bg-red-100 text-red-800 px-2 py-1 rounded-2xl': typeof item[key] === 'boolean' && item[key] === false||  item[key] === 'Missed', 'bg-green-100 text-green-700': item[key] === 'super_admin' ||  item[key] === 'Completed', 'bg-blue-50 text-blue-700': item[key] === 'admin' || item[key] === 'Swapped', 'bg-gray-100 text-gray-700': item[key] === 'lecturer' || item[key] === 'course_rep', 'bg-yellow-50 text-yellow-700': item[key] === 'Pending', 'p-0.5 px-2 rounded-md': key === 'user_role' || key === 'status' }">
                                            <div class="font-medium whitespace-nowrap text-sm"> 
                                                {{item[key]?.name ?? ( item[key]?.first_name ? item[key]?.first_name + ' ' + (item[key]?.other_names ? item[key]?.other_names + ' ' : '') + (item[key]?.last_name ?? '') + (item[key]?.user_id ? ' (' + item[key]?.user_id + ')' : '') : item[key]  | capitalizeWords ) ?? '(Empty)' }}
                                            </div>
                                            <div *ngIf="item[key]?.member_id || item[key]?.staff_id" class="text-gray-400">ID: <span class="text-gray-500">{{item[key]?.member_id ?? item[key]?.staff_id}}</span></div>
                                        </div>

                                    </div>
                                
                                    <div *ngIf="Array.isArray(item[key])" class="text-sm space-y-1">
                                        <ul class="text-sm space-y-1">
                                            <li *ngFor="let subItem of item[key]" class="flex flex-wrap items-center space-x-1" [ngClass]="{'bg-green-100 text-green-800 px-2 py-1 rounded-2xl': typeof item[key] === 'boolean' && item[key] === true, 'bg-red-100 text-red-800 px-2 py-1 rounded-2xl': typeof item[key] === 'boolean' && item[key] === false }">
                                                <span [ngClass]="{'text-gray-400': !subItem?.name }"> {{ subItem?.name ? '• ' + subItem.name : subItem && !subItem.name ? '• ' + subItem : '(Empty)' }} </span>
                                            </li>
                                        </ul>
                                    </div>   

                                </td>
                                
                                <td *ngIf="tableData?.allowMenu" class="whitespace-nowrap p-3 text-right text-xs font-medium space-x-2">
                                    <div class="inline-block text-right">
                                        
                                        <button (focus)="item.showMenu = !item.showMenu" (blur)="item.showMenu = !item.showMenu" class="p-2 rounded-full hover:bg-gray-100 focus:outline-none">
                                        <svg class="w-5 h-5 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M6 10a2 2 0 11-4 0 2 2 0 014 0zm6 0a2 2 0 11-4 0 2 2 0 014 0zm6 0a2 2 0 11-4 0 2 2 0 014 0z" />
                                        </svg>
                                        </button>
                                        
                                        <div *ngIf="item.showMenu" class="origin-top-right absolute right-28 mt-2 w-32 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50">
                                            <div class="py-1 text-sm text-gray-700">
                                                <button (click)="viewItem(item);" class="block w-full text-left px-4 py-2 hover:bg-gray-100">View</button>
                                                <button *ngIf="tableData?.allowEdit" (click)="editItem(item);" class="block w-full text-left px-4 py-2 hover:bg-gray-100">Edit</button>
                                                <button *ngIf="tableData?.allowApprove && !item?.is_approved" (click)="saveItem(item, 'completed');" class="block w-full text-left px-4 py-2 hover:bg-gray-100">Approve</button>
                                                <button *ngIf="tableData?.allowSwap && !item?.is_swapped" (click)="editItem(item, 'swapped');" class="block w-full text-left px-4 py-2 hover:bg-gray-100">Swap</button>
                                                <button *ngIf="tableData?.allowDelete" (click)="openConfirmModal(item)" class="block w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600">Delete</button>
                                            </div>
                                        </div>

                                    </div>
                                </td>
                            </tr>

                        </tbody>
                        
                        <tbody *ngIf="tableData?.dataSet?.length === 0" class="divide-y divide-gray-100">
                            <tr>
                                <td colspan="8" class="px-4 py-6 text-center text-gray-700">No donations match the filters.
                                </td>
                            </tr>

                        </tbody>

                    </table>

                </div>

                <!-- pagination -->
                <div class="mt-3 flex items-center justify-between">
                    
                    <div class="text-sm text-gray-600">Showing {{ (page-1)*tableData?.pageSize + 1 }} — {{ Math.min(page*tableData?.pageSize, filtered.length) }} of {{ filtered.length }}</div>
                    
                    <div class="flex items-center gap-2">
                        <button (click)="prevPage()" [disabled]="page===1" class="px-3 py-1 rounded border disabled:opacity-50">Prev</button>
                        <div class="px-3 py-1 bg-white border rounded">{{ page }} / {{ totalPages }}</div>
                        <button (click)="nextPage()" [disabled]="page===totalPages" class="px-3 py-1 rounded border disabled:opacity-50">Next</button>
                    </div>

                </div>

            </div>

        </div>

    </div>

    <app-fab-btn *ngIf="tableData?.allowFilters" [fabData]="fabData" class="lg:hidden" (clicked)="toggleFilters()"></app-fab-btn>

    <div *ngIf="showFiltersModal" (click)="toggleFilters()" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 z-40 py-3">

        <div class="bg-white w-full max-w-lg pb-4 m-4 rounded-lg shadow-lg">

            <div class="text-gray-900" (click)="$event.stopPropagation()">

                <div class="flex justify-between items-center pt-3 px-4">
                    <div class="text-lg font-bold">Filters</div>
                    <div type="button" (click)="toggleFilters()" class="text-gray-600 text-xl px-3 py-1 rounded-full bg-gray-100 hover:bg-gray-200">&times;</div>
                </div>

                <div class="bg-white rounded-xl p-4 shadow">
            
                    <div class=" mx-3 items-center space-y-6">

                        <div>
                            <label class="block text-xs text-gray-600 mb-1">From</label>
                            <input type="date" [(ngModel)]="filter.start_date" (ngModelChange)="resetPage()" class="w-full p-2 border rounded-md" />
                        </div>

                        <div>
                            <label class="block text-xs text-gray-600 mb-1">To</label>
                            <input type="date" [(ngModel)]="filter.end_date" (ngModelChange)="resetPage()" class="w-full p-2 border rounded-md" />
                        </div>

                        <div>
                            <label class="block text-xs text-gray-600 mb-1">Report On</label>
                            <app-select-input class="w-full" *ngIf="refreshSelect" id="tableData" [selectInputData]="{ items: ['All Donations','Beneficiaries', 'Organisations', 'Projects'], defaultValue: filter.tableData, placeholder: 'Filter By Organisation', autoClose: true }" (selectionChanged)="onFilter('tableData', $event)"></app-select-input>
                        </div>

                        <div *ngIf="filter?.tableData !== 'Projects'">
                            <label class="block text-xs text-gray-600 mb-1">Filter By Organisation</label>
                            <app-select-input class="w-full" *ngIf="refreshSelect" id="organisation" [selectInputData]="{ items: fetchedData?.organisations, defaultValue: filter.organisation, placeholder: 'Filter By Organisation', autoClose: true }" (selectionChanged)="onFilter('organisation', $event)"></app-select-input>
                        </div>

                        <div *ngIf="filter?.tableData === 'Projects'">
                            <label class="block text-xs text-gray-600 mb-1">Filter By Project</label>
                            <app-select-input class="w-full" *ngIf="refreshSelect" id="projects" [selectInputData]="{ items: fetchedData?.projects, defaultValue: filter.project, placeholder: 'Filter By Projects', autoClose: true }" (selectionChanged)="onFilter('project', $event)"></app-select-input>
                        </div>

                    </div>
                    
                </div>

                <div class="flex justify-end space-x-3 pt-4 border-emerald-100 border-t px-8">
                    <button (click)="toggleFilters()" class="bg-red-50 text-red-500" class="bg-gray-50 px-4 py-2 rounded">Cancel</button>
                    <button (click)="handleFilters()" class="px-4 py-2 text-white rounded bg-emerald-700">Apply</button>
                </div>

            </div>

        </div>

    </div>


<app-table-form-modal *ngIf="showAddModal" [formData]="formData" (cancel)="cancelEdit()" (save)="saveItem($event)" (close)="closeModal()"> </app-table-form-modal>

